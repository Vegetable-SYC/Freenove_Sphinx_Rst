##############################################################################
8. 实验性的记录(避免遗忘)
##############################################################################

8.1 并发编译
***************************

**优点:**

    编译速度显著上升，但不确定是否有什么问题

**缺点:**

1、资源消耗增加:

    会占用更多 CPU 和内存资源（使用 -j auto 时会利用所有可用核心）

    可能影响同时运行的其他应用程序性能

    但不会"损害"电脑 - 现代 CPU 有温度保护机制，自动降频

2、缓存一致性问题(罕见):

    极少数情况下可能因并行写入导致缓存不一致

    可通过 make clean 强制全量重建解决


在conf.py最前面添加以下代码:

.. code-block:: python

    num_cpus = os.cpu_count() or 1
    if num_cpus > 1:
        num_jobs = num_cpus - 1  # 保留一个核心给系统
    else:
        num_jobs = 1
    
本地编译指令修改为:

.. code-block:: console

    sphinx-autobuild --port 1009 -j auto source build/html

其中j代表的是CPU的个数, auto代表自动选择